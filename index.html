<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <!-- å„ªåŒ– Viewport è¨­å®šï¼šç¦æ­¢ç¸®æ”¾ï¼Œæ›´åƒ App çš„é«”é©— -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å¿«æ¨‚è–èª•ç¯€ - ä¸€å¹´ç´šäº’å‹•æ•™å­¸</title>
    
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- å¼•å…¥å¯æ„›åœ“é«” -->
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@500;700;900&display=swap" rel="stylesheet">
    
    <!-- Markdown è§£æ -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <!-- å¼•å…¥ PDF ç›¸é—œå·¥å…· -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <style>
        body {
            font-family: 'Zen Maru Gothic', sans-serif;
            background-color: #FFF5F5;
            overflow-x: hidden;
            min-height: 100vh;
            /* é˜²æ­¢ iOS Safari å½ˆæ€§æ²å‹•æ•ˆæœ */
            overscroll-behavior: none;
            /* å„ªåŒ–é»æ“Šé«˜äº®é¡è‰² */
            -webkit-tap-highlight-color: transparent;
        }

        /* --- å°ˆæ¥­åœ‹å°æ³¨éŸ³ CSS (åš´æ ¼ä¿ç•™) --- */
        .z-block {
            display: inline-flex;
            align-items: center;
            margin: 0 2px;
            vertical-align: bottom;
        }

        .z-char {
            line-height: 1;
        }

        .z-bopomofo {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin-left: 4px;
            position: relative;
            width: 1em;
            height: 100%;
            font-size: 1em;
        }

        .z-bo-symbol {
            font-family: sans-serif;
            font-weight: normal;
            line-height: 1;
            font-size: 0.4em;
            transform: scale(1.1);
        }

        .z-tone {
            position: absolute;
            font-family: sans-serif;
            font-weight: bold;
            line-height: 1;
        }

        .z-tone-5 {
            font-size: 0.5em;
            top: -0.6em;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .z-tone-right {
            font-size: 0.8em;
            right: -0.5em;
            top: 50%;
            transform: translateY(-50%);
        }

        /* æ¨™é¡Œæ–‡å­—ç‰¹æ•ˆ */
        .title-text {
            color: #D42426;
            text-shadow: 2px 2px 0px #165B33, 4px 4px 0px #F8B229;
        }
        .title-text .z-bopomofo {
            color: #D42426;
            text-shadow: none;
            font-weight: bold;
        }

        /* æµ®æ°´å°æ¨£å¼ */
        .watermark {
            background-color: #FEE2E2;
            color: #991B1B;
            text-align: center;
            padding: 8px;
            font-weight: bold;
            border-bottom: 2px solid #FCA5A5;
            font-size: 0.9rem;
        }

        /* é£„é›ªç‰¹æ•ˆ */
        .snowflake {
            position: fixed;
            top: -10px;
            color: white;
            font-size: 1em;
            text-shadow: 0 0 5px #000;
            user-select: none;
            z-index: 9999;
            pointer-events: none;
            animation-name: fall;
            animation-timing-function: linear;
            animation-iteration-count: infinite;
        }
        @keyframes fall { to { transform: translateY(100vh); } }

        /* ç¿»ç¿»å¡ç‰¹æ•ˆ */
        .flip-card { perspective: 1000px; cursor: pointer; }
        .flip-card-inner {
            position: relative; width: 100%; height: 100%; text-align: center;
            transition: transform 0.6s; transform-style: preserve-3d;
        }
        .flip-card.flipped .flip-card-inner { transform: rotateY(180deg); }
        .flip-card-front, .flip-card-back {
            position: absolute; width: 100%; height: 100%;
            -webkit-backface-visibility: hidden; backface-visibility: hidden;
            border-radius: 1rem; display: flex; align-items: center; justify-content: center;
            flex-direction: column; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .flip-card-front { background-color: white; border: 4px solid #165B33; }
        .flip-card-back { background-color: #D42426; color: white; transform: rotateY(180deg); border: 4px solid #F8B229; }

        /* éŠæˆ²è£é£¾å“ (æ‹–æ›³ç”¨) - å„ªåŒ–è§¸æ§å€ */
        .draggable-source {
            cursor: grab;
            transition: transform 0.1s;
            touch-action: none;
            user-select: none;
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            padding: 8px;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .draggable-source:active {
            cursor: grabbing;
            background-color: rgba(255, 255, 255, 0.6);
            transform: scale(1.1);
        }
        
        .tree-decoration {
            position: absolute;
            transform: translate(-50%, -50%);
            pointer-events: none;
            animation: popIn 0.3s ease-out;
            font-size: 2.5rem; 
        }
        @keyframes popIn {
            0% { transform: translate(-50%, -50%) scale(0); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        /* AI è¼‰å…¥å‹•ç•« */
        .thinking-dots::after { content: ' .'; animation: dots 1.5s steps(5, end) infinite; }
        @keyframes dots {
            0%, 20% { content: ' .'; }
            40% { content: ' ..'; }
            60% { content: ' ...'; }
            80%, 100% { content: ' ....'; }
        }

        /* å½±ç‰‡å°é¢ */
        .video-cover { cursor: pointer; position: relative; }
        .video-cover::after {
            content: 'â–¶'; position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%); font-size: 4rem; color: white;
            background-color: rgba(220, 38, 38, 0.8); width: 80px; height: 80px;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3); transition: all 0.3s ease;
        }
        .video-cover:hover::after { background-color: rgba(220, 38, 38, 1); transform: translate(-50%, -50%) scale(1.1); }

        /* æ¥ç¦®ç‰©éŠæˆ² Canvas */
        #gameCanvas {
            background: linear-gradient(to bottom, #0f2027, #203a43, #2c5364);
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            cursor: pointer;
            max-width: 100%;
            touch-action: none;
        }

        /* ç¹ªç•«éŠæˆ² Canvas */
        #paintCanvas {
            background-color: white;
            border-radius: 1rem;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.1);
            cursor: crosshair;
            touch-action: none;
        }

        /* è¨˜æ†¶ç¿»ç¿»æ¨‚ Grid */
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px; 
            max-width: 600px;
            margin: 0 auto;
        }
        .memory-card {
            aspect-ratio: 1;
            background-color: #D42426;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: transparent;
            transition: transform 0.2s, background-color 0.2s;
            border: 3px solid #F8B229;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .memory-card.flipped, .memory-card.matched {
            background-color: white;
            color: black;
            transform: rotateY(180deg);
        }
        
        /* èªªè©±æ³¢å½¢å‹•ç•« */
        .speaking-wave {
            display: inline-flex;
            align-items: center;
            gap: 2px;
            height: 20px;
        }
        .bar {
            width: 4px;
            background: #F8B229;
            animation: speak 0.5s infinite ease-in-out;
        }
        .bar:nth-child(1) { animation-delay: 0.1s; height: 10px; }
        .bar:nth-child(2) { animation-delay: 0.2s; height: 15px; }
        .bar:nth-child(3) { animation-delay: 0.3s; height: 20px; }
        @keyframes speak {
            0%, 100% { transform: scaleY(1); }
            50% { transform: scaleY(1.5); }
        }
        
        /* ç•«ç­†é¸æ“‡å™¨ */
        .color-btn {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: transform 0.1s;
        }
        .color-btn.active {
            transform: scale(1.2);
            border-color: #FCD34D;
        }

        /* --- SPA é é¢åˆ‡æ› --- */
        .page-section {
            display: none;
            animation: fadeIn 0.5s;
            padding-bottom: 40px;
        }
        .page-section.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* é¸å–®å¡ç‰‡æ¨£å¼ */
        .menu-card {
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            overflow: hidden;
        }
        .menu-card:active {
            transform: scale(0.98);
        }
        .menu-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        
        /* å·²ç©éæ¨™è¨˜ */
        .played-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #10B981;
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            opacity: 0;
            transform: scale(0);
            transition: all 0.3s;
        }
        .menu-card.played .played-badge {
            opacity: 1;
            transform: scale(1);
        }
        .menu-card.played {
            border-color: #10B981 !important;
            background-color: #ECFDF5 !important;
        }

        /* éŠæˆ²æ§åˆ¶æŒ‰éˆ•å„ªåŒ– */
        .game-ctrl-btn {
            width: 80px;
            height: 80px;
            font-size: 2.5rem;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
            touch-action: manipulation;
            user-select: none;
            -webkit-user-select: none;
        }
        .game-ctrl-btn:active {
            background-color: rgba(255, 255, 255, 0.6);
        }

    </style>
</head>
<body class="relative select-none">

    <!-- 1. æµ®æ°´å° -->
    <div class="watermark">
        è–‡ç³–ç´¹å†°çš„æ•™å­¸æ—¥èªŒ- é»ƒè–‡è€å¸«è¨­è¨ˆã€ç´¹ç¾¤è€å¸«èª¿æ•´å„ªåŒ–
    </div>

    <!-- èƒŒæ™¯è£é£¾ -->
    <div class="fixed inset-0 pointer-events-none z-0 opacity-20" style="background-image: radial-gradient(#165B33 1px, transparent 1px); background-size: 30px 30px;"></div>

    <!-- å°è¦½åˆ— -->
    <nav class="bg-red-600 text-white p-4 sticky top-0 z-50 shadow-lg border-b-4 border-yellow-400">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-black tracking-wider flex items-center gap-2 cursor-pointer active:opacity-80" onclick="goHome()">
                ğŸ„ 
                <!-- å¿«æ¨‚è–èª•ç¯€ (æ³¨éŸ³ä¿ç•™) -->
                <div class="hidden md:block">
                    <span class="z-block"><span class="z-char">å¿«</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„¨</span><span class="z-bo-symbol">ã„</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                    <span class="z-block"><span class="z-char">æ¨‚</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Œ</span><span class="z-bo-symbol">ã„œ</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                    <span class="z-block"><span class="z-char">è–</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                    <span class="z-block"><span class="z-char">èª•</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                    <span class="z-block"><span class="z-char">ç¯€</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                </div>
                <div class="md:hidden">å¿«æ¨‚è–èª•ç¯€</div>
            </h1>
            
            <div class="flex items-center gap-3">
                <span id="navStudentName" class="font-bold text-yellow-200 hidden"></span>
                <div class="text-sm bg-white/20 px-4 py-2 rounded-full flex items-center">
                    <span class="hidden md:inline">
                        <span class="z-block"><span class="z-char">ä¸€</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„§</span></span></span>
                        <span class="z-block"><span class="z-char">å¹´</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‹</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                        <span class="z-block"><span class="z-char">ç´š</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„§</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                    </span>
                    
                    <span class="md:hidden">ä¸€å¹´ç´š</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- ä¸»è¦å…§å®¹å€ -->
    <main class="container mx-auto p-4 md:p-8 relative z-10 max-w-5xl min-h-[80vh]">

        <!-- ==================== é é¢ 1: æ­¡è¿ç™»å…¥é  ==================== -->
        <div id="page-welcome" class="page-section active">
            <div class="flex flex-col items-center justify-center min-h-[70vh] w-full">
                <div class="text-7xl mb-8 bounce-animation">ğŸ…</div>
                <h2 class="text-5xl font-bold mb-8 text-red-700 title-text">
                    <span class="z-block"><span class="z-char">æ­¡</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„¨</span><span class="z-bo-symbol">ã„¢</span></span></span>
                    <span class="z-block"><span class="z-char">è¿</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                    <span class="z-block"><span class="z-char">å…‰</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„¨</span><span class="z-bo-symbol">ã„¤</span></span></span>
                    <span class="z-block"><span class="z-char">è‡¨</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Œ</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„£</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                </h2>
                
                <div class="bg-white p-10 rounded-[2rem] shadow-2xl border-4 border-green-600 max-w-md w-full text-center">
                    <label class="block text-2xl font-bold text-green-800 mb-6">
                        <span class="z-block"><span class="z-char">è«‹</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‘</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">è¼¸</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¨</span></span></span>
                        <span class="z-block"><span class="z-char">å…¥</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„–</span><span class="z-bo-symbol">ã„¨</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">å</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‡</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                        <span class="z-block"><span class="z-char">å­—</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„—</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                    </label>
                    <input type="text" id="studentNameInput" class="w-full text-3xl p-5 text-center border-4 border-gray-200 rounded-2xl mb-8 focus:border-red-500 focus:outline-none" placeholder="ä½ çš„åå­—">
                    <button onclick="login()" class="w-full bg-red-600 hover:bg-red-700 text-white text-2xl font-bold py-5 rounded-2xl shadow-lg transform active:scale-95 transition">
                        <span class="z-block"><span class="z-char">é–‹</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„</span></span></span>
                        <span class="z-block"><span class="z-char">å§‹</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">ä¸Š</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¤</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">èª²</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„œ</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        ğŸš€
                    </button>
                </div>
            </div>
        </div>

        <!-- ==================== é é¢ 2: éŠæˆ²é¸å–®é  ==================== -->
        <div id="page-menu" class="page-section text-center">
            <h2 class="text-4xl md:text-5xl font-black title-text mb-8 mt-4">
                <span class="z-block"><span class="z-char">è«‹</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‘</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                <span class="z-block"><span class="z-char">é¸</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„’</span><span class="z-bo-symbol">ã„©</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                <span class="z-block"><span class="z-char">æ“‡</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„—</span><span class="z-bo-symbol">ã„œ</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                <span class="z-block"><span class="z-char">æ´»</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„¨</span><span class="z-bo-symbol">ã„›</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                <span class="z-block"><span class="z-char">å‹•</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„¨</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
            </h2>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto px-4">
                
                <div class="menu-card bg-white p-6 rounded-3xl shadow-xl border-4 border-red-200 cursor-pointer" onclick="goToSection('section-videos')" id="menu-section-videos">
                    <div class="played-badge">âœ“</div>
                    <div class="text-6xl mb-4">ğŸ“º</div>
                    <h3 class="text-2xl font-bold text-gray-800">
                        <span class="z-block"><span class="z-char">å°</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„’</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„ </span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">å°</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„’</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„ </span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">é›»</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">å½±</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">é™¢</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„©</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                    </h3>
                    <div class="text-lg font-bold text-gray-400 font-sans mt-1">Mini Cinema</div>
                    <p class="text-gray-500 mt-2">çœ‹è–èª•ç¯€çš„æ•…äº‹å½±ç‰‡</p>
                </div>

                <div class="menu-card bg-white p-6 rounded-3xl shadow-xl border-4 border-red-500 cursor-pointer" onclick="goToSection('section-chat')" id="menu-section-chat">
                    <div class="played-badge">âœ“</div>
                    <div class="text-6xl mb-4">ğŸ…</div>
                    <h3 class="text-2xl font-bold text-red-600">
                        <span class="z-block"><span class="z-char">è·Ÿ</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„£</span></span></span>
                        <span class="z-block"><span class="z-char">è–</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">èª•</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">è€</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Œ</span><span class="z-bo-symbol">ã„ </span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">å…¬</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„¨</span><span class="z-bo-symbol">ã„¥</span></span></span>
                        <span class="z-block"><span class="z-char">å…¬</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„¨</span><span class="z-bo-symbol">ã„¥</span></span></span>
                        <span class="z-block"><span class="z-char">èŠ</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Œ</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„ </span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                        <span class="z-block"><span class="z-char">å¤©</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Š</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¢</span></span></span>
                    </h3>
                    <div class="text-lg font-bold text-red-400 font-sans mt-1">Chat with Santa</div>
                    <p class="text-gray-500 mt-2">å•å•é¡Œæˆ–è¨±é¡˜æœ›</p>
                </div>

                <div class="menu-card bg-white p-6 rounded-3xl shadow-xl border-4 border-blue-400 cursor-pointer" onclick="goToSection('section-flashcards')" id="menu-section-flashcards">
                    <div class="played-badge">âœ“</div>
                    <div class="text-6xl mb-4">ğŸ”</div>
                    <h3 class="text-2xl font-bold text-blue-600">
                        <span class="z-block"><span class="z-char">çŸ¥</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„“</span></span></span>
                        <span class="z-block"><span class="z-char">è­˜</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">ç¿»</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„ˆ</span><span class="z-bo-symbol">ã„¢</span></span></span>
                        <span class="z-block"><span class="z-char">ç¿»</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„ˆ</span><span class="z-bo-symbol">ã„¢</span></span></span>
                        <span class="z-block"><span class="z-char">å¡</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„š</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                    </h3>
                    <div class="text-lg font-bold text-blue-400 font-sans mt-1">Flashcards</div>
                    <p class="text-gray-500 mt-2">èªè­˜è–èª•ç¯€ç‰©å“</p>
                </div>

                <div class="menu-card bg-white p-6 rounded-3xl shadow-xl border-4 border-green-600 cursor-pointer" onclick="goToSection('section-game1')" id="menu-section-game1">
                    <div class="played-badge">âœ“</div>
                    <div class="text-6xl mb-4">ğŸ„</div>
                    <h3 class="text-2xl font-bold text-green-700">
                        <span class="z-block"><span class="z-char">è£</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„“</span><span class="z-bo-symbol">ã„¨</span><span class="z-bo-symbol">ã„¤</span></span></span>
                        <span class="z-block"><span class="z-char">é£¾</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">è–</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">èª•</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">æ¨¹</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¨</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                    </h3>
                    <div class="text-lg font-bold text-green-500 font-sans mt-1">Decorate the Tree</div>
                    <p class="text-gray-500 mt-2">æŠŠè£é£¾å“æ›ä¸Šå»</p>
                </div>

                <div class="menu-card bg-white p-6 rounded-3xl shadow-xl border-4 border-blue-600 cursor-pointer" onclick="goToSection('section-game2')" id="menu-section-game2">
                    <div class="played-badge">âœ“</div>
                    <div class="text-6xl mb-4">ğŸƒ</div>
                    <h3 class="text-2xl font-bold text-blue-700">
                        <span class="z-block"><span class="z-char">è¨˜</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„§</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">æ†¶</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„§</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">ç¿»</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„ˆ</span><span class="z-bo-symbol">ã„¢</span></span></span>
                        <span class="z-block"><span class="z-char">ç¿»</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„ˆ</span><span class="z-bo-symbol">ã„¢</span></span></span>
                        <span class="z-block"><span class="z-char">æ¨‚</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Œ</span><span class="z-bo-symbol">ã„œ</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                    </h3>
                    <div class="text-lg font-bold text-blue-500 font-sans mt-1">Memory Game</div>
                    <p class="text-gray-500 mt-2">è€ƒé©—ä½ çš„è¨˜æ†¶åŠ›</p>
                </div>

                <div class="menu-card bg-white p-6 rounded-3xl shadow-xl border-4 border-purple-400 cursor-pointer" onclick="goToSection('section-game3')" id="menu-section-game3">
                    <div class="played-badge">âœ“</div>
                    <div class="text-6xl mb-4">ğŸ</div>
                    <h3 class="text-2xl font-bold text-purple-600">
                        <span class="z-block"><span class="z-char">æ¥</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„</span></span></span>
                        <span class="z-block"><span class="z-char">ç¦®</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Œ</span><span class="z-bo-symbol">ã„§</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">ç‰©</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„¨</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">å¤§</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„š</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">æŒ‘</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Š</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„ </span></span></span>
                        <span class="z-block"><span class="z-char">æˆ°</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„“</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                    </h3>
                    <div class="text-lg font-bold text-purple-500 font-sans mt-1">Catch the Gifts</div>
                    <p class="text-gray-500 mt-2">å¹«è–èª•è€äººæ¥ç¦®ç‰©</p>
                </div>

                <div class="menu-card bg-white p-6 rounded-3xl shadow-xl border-4 border-orange-400 cursor-pointer" onclick="goToSection('section-game4')" id="menu-section-game4">
                    <div class="played-badge">âœ“</div>
                    <div class="text-6xl mb-4">ğŸ¨</div>
                    <h3 class="text-2xl font-bold text-orange-600">
                        <span class="z-block"><span class="z-char">å½©</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„˜</span><span class="z-bo-symbol">ã„</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">ç¹ª</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„¨</span><span class="z-bo-symbol">ã„Ÿ</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">è–</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">èª•</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">è€</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Œ</span><span class="z-bo-symbol">ã„ </span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">äºº</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„–</span><span class="z-bo-symbol">ã„£</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                    </h3>
                    <div class="text-lg font-bold text-orange-500 font-sans mt-1">Paint Santa</div>
                    <p class="text-gray-500 mt-2">ç•«å‡ºæ¼‚äº®çš„é¡è‰²</p>
                </div>

                <div class="menu-card bg-white p-6 rounded-3xl shadow-xl border-4 border-yellow-400 cursor-pointer" onclick="goToSection('section-story')" id="menu-section-story">
                    <div class="played-badge">âœ“</div>
                    <div class="text-6xl mb-4">âœ¨</div>
                    <h3 class="text-2xl font-bold text-yellow-600">
                        <span class="z-block"><span class="z-char">é­”</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‡</span><span class="z-bo-symbol">ã„›</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                        <span class="z-block"><span class="z-char">æ³•</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„ˆ</span><span class="z-bo-symbol">ã„š</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">æ•…</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„¨</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">äº‹</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">æ©Ÿ</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„§</span></span></span>
                    </h3>
                    <div class="text-lg font-bold text-yellow-500 font-sans mt-1">Magic Story</div>
                    <p class="text-gray-500 mt-2">AI è®Šå‡ºæœ‰è¶£æ•…äº‹</p>
                </div>

            </div>
        </div>

        <!-- ==================== å„å€‹åŠŸèƒ½å€å¡Š ==================== -->

        <!-- å½±ç‰‡å­¸ç¿’å€ -->
        <div id="section-videos" class="page-section">
            <button onclick="goHome()" class="mb-6 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-3 px-8 rounded-full flex items-center gap-2 text-xl shadow-md active:scale-95 transition">
                ğŸ  å›ä¸»é¸å–®
            </button>
            <section class="mb-16">
                <div class="flex items-center gap-3 mb-6">
                    <span class="text-3xl">ğŸ“º</span>
                    <h3 class="text-3xl font-bold text-red-700 leading-relaxed">
                        <span class="z-block"><span class="z-char">å°</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„’</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„ </span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">å°</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„’</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„ </span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">é›»</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">å½±</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">é™¢</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„©</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                    </h3>
                </div>
                
                <div class="grid md:grid-cols-3 gap-8">
                    <div class="bg-white p-4 rounded-3xl shadow-xl border-4 border-green-600 transform hover:-translate-y-1 active:scale-95 transition duration-200">
                        <div class="video-cover bg-black rounded-2xl overflow-hidden aspect-video relative mb-4" onclick="playVideo(this, 'EEJrFonrE4E', 13)">
                            <img src="https://i.ytimg.com/vi/EEJrFonrE4E/maxresdefault.jpg" alt="è–èª•ç¯€çš„æ•…äº‹å½±ç‰‡å°é¢" class="w-full h-full object-cover opacity-90 hover:opacity-100 transition">
                        </div>
                        <div class="text-center">
                            <h4 class="text-2xl font-bold text-green-800 mb-1 leading-relaxed">
                                ğŸ“– 
                                <span class="z-block"><span class="z-char">è–</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                <span class="z-block"><span class="z-char">èª•</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                <span class="z-block"><span class="z-char">æ•…</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„¨</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                <span class="z-block"><span class="z-char">äº‹</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                            </h4>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-3xl shadow-xl border-4 border-red-500 transform hover:-translate-y-1 active:scale-95 transition duration-200">
                        <div class="video-cover bg-black rounded-2xl overflow-hidden aspect-video relative mb-4" onclick="playVideo(this, '_c2lbV7n03I')">
                            <img src="https://i.ytimg.com/vi/_c2lbV7n03I/maxresdefault.jpg" alt="ç¦®ç‰©çš„ç§˜å¯†å½±ç‰‡å°é¢" class="w-full h-full object-cover opacity-90 hover:opacity-100 transition">
                        </div>
                        <div class="text-center">
                            <h4 class="text-2xl font-bold text-red-600 mb-1 leading-relaxed">
                                ğŸ 
                                <span class="z-block"><span class="z-char">ç¦®</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Œ</span><span class="z-bo-symbol">ã„§</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                                <span class="z-block"><span class="z-char">ç‰©</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„¨</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                <span class="z-block"><span class="z-char">ç§˜</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‡</span><span class="z-bo-symbol">ã„§</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                <span class="z-block"><span class="z-char">å¯†</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‡</span><span class="z-bo-symbol">ã„§</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                            </h4>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-3xl shadow-xl border-4 border-green-600 transform hover:-translate-y-1 active:scale-95 transition duration-200">
                        <div class="video-cover bg-black rounded-2xl overflow-hidden aspect-video relative mb-4" onclick="playVideo(this, 'WVjsGU5GxUw')">
                            <img src="https://i.ytimg.com/vi/WVjsGU5GxUw/maxresdefault.jpg" alt="å¯«ä¿¡çµ¦è–èª•è€äººå½±ç‰‡å°é¢" class="w-full h-full object-cover opacity-90 hover:opacity-100 transition">
                        </div>
                        <div class="text-center">
                            <h4 class="text-2xl font-bold text-green-800 mb-1 leading-relaxed">
                                âœ‰ï¸ 
                                <span class="z-block"><span class="z-char">å¯«</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„’</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                                <span class="z-block"><span class="z-char">ä¿¡</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„’</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„£</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                <span class="z-block"><span class="z-char">çµ¦</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„Ÿ</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                                <span class="z-block"><span class="z-char">ä»–</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Š</span><span class="z-bo-symbol">ã„š</span></span></span>
                            </h4>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- èŠå¤©å®¤ -->
        <div id="section-chat" class="page-section">
            <button onclick="goHome()" class="mb-6 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-3 px-8 rounded-full flex items-center gap-2 text-xl shadow-md active:scale-95 transition">
                ğŸ  å›ä¸»é¸å–®
            </button>
            <section class="mb-16 bg-red-600 rounded-[2rem] p-6 md:p-10 shadow-2xl border-4 border-white text-white">
                <div class="flex items-center gap-3 mb-6">
                    <span class="text-4xl">ğŸ…</span>
                    <h3 class="text-3xl font-bold leading-relaxed">
                        <span class="z-block"><span class="z-char">èŠ</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Œ</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„ </span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                        <span class="z-block"><span class="z-char">èŠ</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Œ</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„ </span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                        <span class="z-block"><span class="z-char">å¤©</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Š</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¢</span></span></span> âœ¨
                    </h3>
                </div>
                
                <div class="bg-white/10 p-8 rounded-3xl backdrop-blur-sm">
                    <p class="mb-6 text-2xl leading-loose">
                        <span class="z-block"><span class="z-char">ç”¨</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„©</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">èªª</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¨</span><span class="z-bo-symbol">ã„›</span></span></span>
                        <span class="z-block"><span class="z-char">çš„</span><span class="z-bopomofo"><span class="z-tone z-tone-5">Ë™</span><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„œ</span></span></span>ï¼Œ
                        <span class="z-block"><span class="z-char">æˆ–</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„¨</span><span class="z-bo-symbol">ã„›</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">æ˜¯</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">æ‰“</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„š</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">å­—</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„—</span><span class="z-tone z-tone-right">Ë‹</span></span></span>ï¼Œ
                        <span class="z-block"><span class="z-char">è·Ÿ</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„£</span></span></span>
                        <span class="z-block"><span class="z-char">æˆ‘</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„¨</span><span class="z-bo-symbol">ã„›</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">èªª</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¨</span><span class="z-bo-symbol">ã„›</span></span></span>
                        <span class="z-block"><span class="z-char">è©±</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„¨</span><span class="z-bo-symbol">ã„š</span><span class="z-tone z-tone-right">Ë‹</span></span></span>ï¼
                    </p>
                    <div class="flex flex-col gap-6">
                        <div class="relative flex-1">
                            <input type="text" id="santaInput" placeholder="æƒ³è·Ÿè–èª•è€å…¬å…¬èªªä»€éº¼ï¼Ÿ" class="w-full p-6 pr-16 rounded-2xl text-gray-800 text-2xl border-4 border-yellow-400 focus:outline-none focus:border-yellow-300 shadow-inner">
                            <button onclick="startListening()" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-3xl p-3 hover:bg-gray-100 rounded-full transition" title="ç”¨èªªçš„">
                                ğŸ™ï¸
                            </button>
                        </div>
                        <button onclick="askSanta()" class="bg-yellow-400 hover:bg-yellow-300 text-red-700 font-bold py-4 px-8 rounded-2xl shadow-lg transform active:scale-95 transition text-2xl whitespace-nowrap leading-relaxed">
                            <span class="z-block"><span class="z-char">é€</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„™</span><span class="z-bo-symbol">ã„¨</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                            <span class="z-block"><span class="z-char">å‡º</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„”</span><span class="z-bo-symbol">ã„¨</span></span></span> ğŸ’Œ
                        </button>
                    </div>
                    
                    <div id="santaResponse" class="mt-8 bg-white text-gray-800 p-8 rounded-3xl shadow-md hidden">
                        <div class="flex gap-6 items-start">
                            <div class="text-5xl flex-shrink-0">ğŸ…</div>
                            <div class="flex-1">
                                <div class="flex justify-between items-center mb-4">
                                    <h4 class="text-xl font-bold text-red-600">è–èª•è€å…¬å…¬èªªï¼š</h4>
                                    <button id="playAudioBtn" onclick="playSantaAudio()" class="hidden flex items-center gap-2 bg-blue-100 hover:bg-blue-200 text-blue-700 px-4 py-2 rounded-full text-lg font-bold transition">
                                        <span>ğŸ”Š è½è–èª•è€å…¬å…¬èªª</span>
                                    </button>
                                    <div id="audioLoading" class="hidden text-lg text-gray-500 flex items-center gap-2">
                                        <div class="speaking-wave">
                                            <div class="bar"></div><div class="bar"></div><div class="bar"></div>
                                        </div>
                                        æº–å‚™è²éŸ³ä¸­...
                                    </div>
                                </div>
                                <div id="santaText" class="text-2xl leading-relaxed"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="santaLoading" class="mt-8 text-center text-2xl font-bold hidden thinking-dots leading-relaxed">
                        è–èª•è€å…¬å…¬æ­£åœ¨æƒ³...
                    </div>
                </div>
            </section>
        </div>

        <!-- éŠæˆ² 1: è£é£¾æ¨¹ -->
        <div id="section-game1" class="page-section">
            <button onclick="goHome()" class="mb-6 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-3 px-8 rounded-full flex items-center gap-2 text-xl shadow-md active:scale-95 transition">
                ğŸ  å›ä¸»é¸å–®
            </button>
            <section class="mb-12 bg-green-800 rounded-[2rem] p-6 md:p-10 text-white relative overflow-hidden shadow-2xl border-4 border-yellow-400">
                <div class="text-center mb-4 relative z-10">
                    <h3 class="text-3xl font-bold mb-2 leading-relaxed">
                        1. 
                        <span class="z-block"><span class="z-char">è£</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„“</span><span class="z-bo-symbol">ã„¨</span><span class="z-bo-symbol">ã„¤</span></span></span>
                        <span class="z-block"><span class="z-char">é£¾</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">è–</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">èª•</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">æ¨¹</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¨</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                    </h3>
                    <p class="text-lg opacity-80">
                        (
                        <span class="z-block"><span class="z-char">ç”¨</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„©</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">æ‰‹</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¡</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">æŒ‡</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„“</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">æŠŠ</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„…</span><span class="z-bo-symbol">ã„š</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">æ˜Ÿ</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„’</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¥</span></span></span>
                        <span class="z-block"><span class="z-char">æ˜Ÿ</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„’</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¥</span></span></span>ã€
                        <span class="z-block"><span class="z-char">å½©</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„˜</span><span class="z-bo-symbol">ã„</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">çƒ</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‘</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¡</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                        <span class="z-block"><span class="z-char">æ‹–</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Š</span><span class="z-bo-symbol">ã„¨</span><span class="z-bo-symbol">ã„›</span></span></span>
                        <span class="z-block"><span class="z-char">åˆ°</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„ </span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">æ¨¹</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¨</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">ä¸Š</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¤</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        )
                    </p>
                </div>
                
                <div class="relative bg-white/10 rounded-3xl p-4" style="height: 600px; touch-action: none;" id="decorationGameArea">
                    <div class="absolute left-1/2 transform -translate-x-1/2 bottom-40 w-72 h-96 flex justify-center items-end" id="treeTargetArea">
                        <div class="w-16 h-20 bg-yellow-900 mx-auto"></div>
                        <div class="absolute bottom-20 flex flex-col items-center">
                            <div class="w-0 h-0 border-l-[120px] border-r-[120px] border-b-[120px] border-l-transparent border-r-transparent border-b-green-600 -mb-12"></div>
                            <div class="w-0 h-0 border-l-[100px] border-r-[100px] border-b-[100px] border-l-transparent border-r-transparent border-b-green-500 -mb-12"></div>
                            <div class="w-0 h-0 border-l-[80px] border-r-[80px] border-b-[80px] border-l-transparent border-r-transparent border-b-green-400"></div>
                        </div>
                    </div>

                    <!-- åº•éƒ¨å·¥å…·åˆ— -->
                    <div class="absolute bottom-0 left-0 right-0 h-32 bg-white/20 rounded-b-3xl flex justify-around items-center px-4 z-20 pb-4">
                        <div class="draggable-source text-5xl" data-type="ğŸŒŸ">ğŸŒŸ</div>
                        <div class="draggable-source text-4xl" data-type="ğŸ”´">ğŸ”´</div>
                        <div class="draggable-source text-4xl" data-type="ğŸ”µ">ğŸ”µ</div>
                        <div class="draggable-source text-4xl" data-type="ğŸ">ğŸ</div>
                        <div class="draggable-source text-4xl" data-type="ğŸ€">ğŸ€</div>
                        <div class="draggable-source text-4xl" data-type="ğŸ»">ğŸ»</div>
                        
                        <div class="flex flex-col gap-2">
                            <button onclick="clearDecorations()" class="bg-red-500 hover:bg-red-600 text-white text-sm font-bold px-4 py-2 rounded-xl shadow active:scale-95 transition">é‡ä¾†</button>
                            <button onclick="exportTreePDF()" class="bg-yellow-500 hover:bg-yellow-600 text-white text-sm font-bold px-4 py-2 rounded-xl shadow flex items-center gap-1 active:scale-95 transition">
                                ğŸ“¥ å­˜æª”
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- éŠæˆ² 2: è¨˜æ†¶éŠæˆ² -->
        <div id="section-game2" class="page-section">
            <button onclick="goHome()" class="mb-6 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-3 px-8 rounded-full flex items-center gap-2 text-xl shadow-md active:scale-95 transition">
                ğŸ  å›ä¸»é¸å–®
            </button>
            <section class="mb-12 bg-blue-600 rounded-[2rem] p-6 md:p-10 text-white shadow-2xl border-4 border-white relative">
                <div class="text-center mb-8">
                    <h3 class="text-3xl font-bold mb-4">
                        2. 
                        <span class="z-block"><span class="z-char">è¨˜</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„§</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">æ†¶</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„§</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">ç¿»</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„ˆ</span><span class="z-bo-symbol">ã„¢</span></span></span>
                        <span class="z-block"><span class="z-char">ç¿»</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„ˆ</span><span class="z-bo-symbol">ã„¢</span></span></span>
                        <span class="z-block"><span class="z-char">æ¨‚</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Œ</span><span class="z-bo-symbol">ã„œ</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                    </h3>
                    <div class="text-2xl font-bold text-yellow-300 mb-4">
                        â³ 
                        <span class="z-block"><span class="z-char">æ™‚</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                        <span class="z-block"><span class="z-char">é–“</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¢</span></span></span>: <span id="memoryTimer">60</span>
                    </div>
                    <p class="text-xl mb-4">
                        <span class="z-block"><span class="z-char">æ‰¾</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„“</span><span class="z-bo-symbol">ã„ </span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">å‡º</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„”</span><span class="z-bo-symbol">ã„¨</span></span></span>
                        <span class="z-block"><span class="z-char">ä¸€</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„§</span></span></span>
                        <span class="z-block"><span class="z-char">æ¨£</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¤</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">çš„</span><span class="z-bopomofo"><span class="z-tone z-tone-5">Ë™</span><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„œ</span></span></span>
                        <span class="z-block"><span class="z-char">åœ–</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Š</span><span class="z-bo-symbol">ã„¨</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                        <span class="z-block"><span class="z-char">ç‰‡</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„†</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">Ë‹</span></span></span>ï¼
                    </p>
                    <button onclick="initMemoryGame()" class="bg-white text-blue-700 px-6 py-3 rounded-full font-bold text-lg hover:bg-blue-50 shadow-lg active:scale-95 transition">ğŸ”„ é‡æ–°é–‹å§‹</button>
                </div>
                <div class="relative pb-4">
                    <div class="memory-grid" id="memoryGrid"></div>
                    <!-- é–‹å§‹éŠæˆ²é®ç½© -->
                    <div id="memoryOverlay" class="absolute inset-0 flex items-center justify-center bg-black/60 rounded-3xl z-10">
                        <button onclick="startMemoryGame()" class="bg-green-500 hover:bg-green-600 text-white text-3xl font-bold py-6 px-12 rounded-full shadow-2xl transform hover:scale-105 active:scale-95 transition border-4 border-white">
                            â–¶ é–‹å§‹éŠæˆ²
                        </button>
                    </div>
                </div>
            </section>
        </div>

        <!-- éŠæˆ² 3: æ¥ç¦®ç‰© -->
        <div id="section-game3" class="page-section">
            <button onclick="goHome()" class="mb-6 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-3 px-8 rounded-full flex items-center gap-2 text-xl shadow-md active:scale-95 transition">
                ğŸ  å›ä¸»é¸å–®
            </button>
            <section class="mb-16 bg-purple-700 rounded-[2rem] p-6 md:p-10 text-white shadow-2xl border-4 border-pink-400">
                <div class="text-center mb-6">
                    <h3 class="text-3xl font-bold mb-2">
                        3. 
                        <span class="z-block"><span class="z-char">æ¥</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„</span></span></span>
                        <span class="z-block"><span class="z-char">ç¦®</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Œ</span><span class="z-bo-symbol">ã„§</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">ç‰©</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„¨</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">å¤§</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„š</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">æŒ‘</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Š</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„ </span></span></span>
                        <span class="z-block"><span class="z-char">æˆ°</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„“</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                    </h3>
                    <p class="text-xl">
                        <span class="z-block"><span class="z-char">é»</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">æ“Š</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„§</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                        <span class="z-block"><span class="z-char">å·¦</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„—</span><span class="z-bo-symbol">ã„¨</span><span class="z-bo-symbol">ã„›</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">å³</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¡</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">å…©</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Œ</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¤</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">é‚Š</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„…</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¢</span></span></span>
                        <span class="z-block"><span class="z-char">ç§»</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„§</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                        <span class="z-block"><span class="z-char">å‹•</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„¨</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">è–</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">èª•</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">è€</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Œ</span><span class="z-bo-symbol">ã„ </span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">äºº</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„–</span><span class="z-bo-symbol">ã„£</span><span class="z-tone z-tone-right">ËŠ</span></span></span>ï¼
                    </p>
                </div>
                <div class="relative w-full max-w-2xl mx-auto">
                    <canvas id="gameCanvas" width="600" height="400" class="w-full rounded-2xl border-4 border-purple-300"></canvas>
                    <div id="gameOverlay" class="absolute inset-0 flex items-center justify-center bg-black/60 rounded-2xl">
                        <button onclick="startGame()" class="bg-green-500 hover:bg-green-600 text-white text-3xl font-bold py-6 px-12 rounded-full shadow-2xl transform hover:scale-105 active:scale-95 transition border-4 border-white">
                            â–¶ é–‹å§‹éŠæˆ²
                        </button>
                    </div>
                    <div class="absolute top-4 left-6 text-2xl font-bold bg-black/30 px-4 py-2 rounded-xl">
                        <span class="z-block"><span class="z-char">å¾—</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„œ</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                        <span class="z-block"><span class="z-char">åˆ†</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„ˆ</span><span class="z-bo-symbol">ã„£</span></span></span>: <span id="score">0</span>
                    </div>
                    <div class="absolute top-4 right-6 text-2xl font-bold bg-black/30 px-4 py-2 rounded-xl">â³ <span id="catchTimer">60</span></div>
                </div>
                <div class="flex justify-center gap-8 mt-8 items-center">
                    <div class="game-ctrl-btn" onmousedown="moveLeft()" onmouseup="stopMove()" ontouchstart="moveLeft()" ontouchend="stopMove()">â¬…ï¸</div>
                    
                    <button onclick="restartCatchGame()" class="bg-red-500 hover:bg-red-600 text-white font-bold py-4 px-8 rounded-2xl shadow-lg text-xl flex items-center gap-2 active:scale-95 transition border-2 border-white/50">
                        ğŸ”„ é‡æ–°é–‹å§‹
                    </button>
                    
                    <div class="game-ctrl-btn" onmousedown="moveRight()" onmouseup="stopMove()" ontouchstart="moveRight()" ontouchend="stopMove()">â¡ï¸</div>
                </div>
            </section>
        </div>

        <!-- éŠæˆ² 4: å½©ç¹ª -->
        <div id="section-game4" class="page-section">
            <button onclick="goHome()" class="mb-6 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-3 px-8 rounded-full flex items-center gap-2 text-xl shadow-md active:scale-95 transition">
                ğŸ  å›ä¸»é¸å–®
            </button>
            <section class="mb-16 bg-orange-500 rounded-[2rem] p-6 md:p-10 text-white shadow-2xl border-4 border-yellow-300">
                <div class="text-center mb-6">
                    <h3 class="text-3xl font-bold mb-2 leading-relaxed">
                        4. 
                        <span class="z-block"><span class="z-char">å½©</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„˜</span><span class="z-bo-symbol">ã„</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">ç¹ª</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„¨</span><span class="z-bo-symbol">ã„Ÿ</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">è–</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">èª•</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">è€</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Œ</span><span class="z-bo-symbol">ã„ </span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">äºº</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„–</span><span class="z-bo-symbol">ã„£</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                    </h3>
                    <p class="text-xl">
                        <span class="z-block"><span class="z-char">å¹«</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„…</span><span class="z-bo-symbol">ã„¤</span></span></span>
                        <span class="z-block"><span class="z-char">è–</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">èª•</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">è€</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Œ</span><span class="z-bo-symbol">ã„ </span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">äºº</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„–</span><span class="z-bo-symbol">ã„£</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                        <span class="z-block"><span class="z-char">å¡—</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Š</span><span class="z-bo-symbol">ã„¨</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                        <span class="z-block"><span class="z-char">ä¸Š</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¤</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">é¡</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                        <span class="z-block"><span class="z-char">è‰²</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„™</span><span class="z-bo-symbol">ã„œ</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">å§</span><span class="z-bopomofo"><span class="z-tone z-tone-5">Ë™</span><span class="z-bo-symbol">ã„…</span><span class="z-bo-symbol">ã„š</span></span></span>ï¼
                    </p>
                </div>
                <div class="flex flex-col items-center">
                    <!-- ç•«å¸ƒ -->
                    <div class="p-2 bg-white rounded-2xl shadow-inner mb-6">
                        <canvas id="paintCanvas" width="400" height="450" class="bg-white rounded-xl cursor-crosshair touch-none"></canvas>
                    </div>
                    
                    <!-- é¡è‰²é¸æ“‡å™¨ -->
                    <div class="flex gap-4 mb-6 bg-white/20 p-4 rounded-2xl overflow-x-auto max-w-full">
                        <div class="color-btn active" style="background-color: #EF4444;" onclick="setColor(this, '#EF4444')"></div>
                        <div class="color-btn" style="background-color: #10B981;" onclick="setColor(this, '#10B981')"></div>
                        <div class="color-btn" style="background-color: #FCD34D;" onclick="setColor(this, '#FCD34D')"></div>
                        <div class="color-btn" style="background-color: #3B82F6;" onclick="setColor(this, '#3B82F6')"></div>
                        <div class="color-btn" style="background-color: #8B5CF6;" onclick="setColor(this, '#8B5CF6')"></div>
                        <div class="color-btn" style="background-color: #000000;" onclick="setColor(this, '#000000')"></div>
                        <div class="color-btn" style="background-color: #FFFFFF; border: 2px solid #ccc;" onclick="setColor(this, '#FFFFFF')"></div>
                        <div class="color-btn" style="background-color: #FCA5A5;" onclick="setColor(this, '#FCA5A5')"></div>
                    </div>
                    
                    <!-- å·¥å…·åˆ— -->
                    <div class="flex gap-4 flex-wrap justify-center">
                        <button onclick="setBrushSize(5)" class="bg-white text-orange-600 px-6 py-3 rounded-xl font-bold text-lg hover:bg-gray-100 shadow active:scale-95 transition">ç´°ç­†</button>
                        <button onclick="setBrushSize(15)" class="bg-white text-orange-600 px-6 py-3 rounded-xl font-bold text-lg hover:bg-gray-100 shadow active:scale-95 transition">ç²—ç­†</button>
                        <button onclick="clearPaint()" class="bg-red-600 text-white px-6 py-3 rounded-xl font-bold text-lg hover:bg-red-700 shadow active:scale-95 transition">å…¨éƒ¨é‡ç•«</button>
                        <button onclick="exportPaintPDF()" class="bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-3 rounded-xl font-bold text-lg shadow flex items-center gap-2 active:scale-95 transition">
                            ğŸ“¥ å­˜æˆ PDF
                        </button>
                    </div>
                </div>
            </section>
        </div>

        <!-- çŸ¥è­˜å¡ç‰‡ -->
        <div id="section-flashcards" class="page-section">
            <button onclick="goHome()" class="mb-6 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-3 px-8 rounded-full flex items-center gap-2 text-xl shadow-md active:scale-95 transition">
                ğŸ  å›ä¸»é¸å–®
            </button>
            <section class="mb-16">
                <div class="flex items-center gap-3 mb-6">
                    <span class="text-3xl">ğŸ”</span>
                    <h3 class="text-3xl font-bold text-red-700 leading-relaxed">
                        <span class="z-block"><span class="z-char">çŸ¥</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„“</span></span></span>
                        <span class="z-block"><span class="z-char">è­˜</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">ç¿»</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„ˆ</span><span class="z-bo-symbol">ã„¢</span></span></span>
                        <span class="z-block"><span class="z-char">ç¿»</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„ˆ</span><span class="z-bo-symbol">ã„¢</span></span></span>
                        <span class="z-block"><span class="z-char">å¡</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„š</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                    </h3>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6 h-80">
                    <div class="flip-card h-full" onclick="this.classList.toggle('flipped')">
                        <div class="flip-card-inner">
                            <div class="flip-card-front"><div class="text-7xl mb-4">ğŸ„</div>
                                <h4 class="text-2xl font-bold text-gray-700">
                                    <span class="z-block"><span class="z-char">é€™</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„“</span><span class="z-bo-symbol">ã„œ</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                    <span class="z-block"><span class="z-char">æ˜¯</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                    <span class="z-block"><span class="z-char">ä»€</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„œ</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                                    <span class="z-block"><span class="z-char">éº¼</span><span class="z-bopomofo"><span class="z-tone z-tone-5">Ë™</span><span class="z-bo-symbol">ã„‡</span><span class="z-bo-symbol">ã„œ</span></span></span>ï¼Ÿ
                                </h4>
                            </div>
                            <div class="flip-card-back p-4">
                                <h4 class="text-2xl font-bold text-yellow-300 mb-1 flex flex-wrap justify-center">
                                    <span class="z-block"><span class="z-char">è–</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                    <span class="z-block"><span class="z-char">èª•</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                    <span class="z-block"><span class="z-char">æ¨¹</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¨</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                </h4>
                                <div class="text-lg font-bold text-white font-sans mb-2">Christmas Tree</div>
                                <p>
                                    <span class="z-block"><span class="z-char">å¸¸</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„”</span><span class="z-bo-symbol">ã„¤</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                                    <span class="z-block"><span class="z-char">é’</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‘</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¥</span></span></span>
                                    <span class="z-block"><span class="z-char">æ¨¹</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¨</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                    <span class="z-block"><span class="z-char">ä»£</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                    <span class="z-block"><span class="z-char">è¡¨</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„…</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„ </span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                                    <span class="z-block"><span class="z-char">ç”Ÿ</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¥</span></span></span>
                                    <span class="z-block"><span class="z-char">å‘½</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‡</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                    <span class="z-block"><span class="z-char">åŠ›</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Œ</span><span class="z-bo-symbol">ã„§</span><span class="z-tone z-tone-right">Ë‹</span></span></span>ï¼
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card h-full" onclick="this.classList.toggle('flipped')">
                        <div class="flip-card-inner">
                            <div class="flip-card-front"><div class="text-7xl mb-4">ğŸª</div>
                                <h4 class="text-2xl font-bold text-gray-700">
                                    <span class="z-block"><span class="z-char">é€™</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„“</span><span class="z-bo-symbol">ã„œ</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                    <span class="z-block"><span class="z-char">æ˜¯</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                    <span class="z-block"><span class="z-char">ä»€</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„œ</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                                    <span class="z-block"><span class="z-char">éº¼</span><span class="z-bopomofo"><span class="z-tone z-tone-5">Ë™</span><span class="z-bo-symbol">ã„‡</span><span class="z-bo-symbol">ã„œ</span></span></span>ï¼Ÿ
                                </h4>
                            </div>
                            <div class="flip-card-back p-4">
                                <h4 class="text-2xl font-bold text-yellow-300 mb-1 flex flex-wrap justify-center">
                                    <span class="z-block"><span class="z-char">è–‘</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¤</span></span></span>
                                    <span class="z-block"><span class="z-char">é¤…</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„…</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                                    <span class="z-block"><span class="z-char">äºº</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„–</span><span class="z-bo-symbol">ã„£</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                                </h4>
                                <div class="text-lg font-bold text-white font-sans mb-2">Gingerbread Man</div>
                                <p>
                                    <span class="z-block"><span class="z-char">å¥½</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„ </span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                                    <span class="z-block"><span class="z-char">åƒ</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„”</span></span></span>
                                    <span class="z-block"><span class="z-char">çš„</span><span class="z-bopomofo"><span class="z-tone z-tone-5">Ë™</span><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„œ</span></span></span>
                                    <span class="z-block"><span class="z-char">é¤…</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„…</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                                    <span class="z-block"><span class="z-char">ä¹¾</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„¢</span></span></span>ï¼
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card h-full" onclick="this.classList.toggle('flipped')">
                        <div class="flip-card-inner">
                            <div class="flip-card-front"><div class="text-7xl mb-4">ğŸ§¦</div>
                                <h4 class="text-2xl font-bold text-gray-700">
                                    <span class="z-block"><span class="z-char">é€™</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„“</span><span class="z-bo-symbol">ã„œ</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                    <span class="z-block"><span class="z-char">æ˜¯</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                    <span class="z-block"><span class="z-char">ä»€</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„œ</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                                    <span class="z-block"><span class="z-char">éº¼</span><span class="z-bopomofo"><span class="z-tone z-tone-5">Ë™</span><span class="z-bo-symbol">ã„‡</span><span class="z-bo-symbol">ã„œ</span></span></span>ï¼Ÿ
                                </h4>
                            </div>
                            <div class="flip-card-back p-4">
                                <h4 class="text-2xl font-bold text-yellow-300 mb-1 flex flex-wrap justify-center">
                                    <span class="z-block"><span class="z-char">è–</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                    <span class="z-block"><span class="z-char">èª•</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                    <span class="z-block"><span class="z-char">è¥ª</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„¨</span><span class="z-bo-symbol">ã„š</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                </h4>
                                <div class="text-lg font-bold text-white font-sans mb-2">Christmas Stocking</div>
                                <p>
                                    <span class="z-block"><span class="z-char">æœŸ</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‘</span><span class="z-bo-symbol">ã„§</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                                    <span class="z-block"><span class="z-char">å¾…</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                    <span class="z-block"><span class="z-char">æ”¶</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¡</span></span></span>
                                    <span class="z-block"><span class="z-char">åˆ°</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„ </span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                    <span class="z-block"><span class="z-char">ç¦®</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Œ</span><span class="z-bo-symbol">ã„§</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                                    <span class="z-block"><span class="z-char">ç‰©</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„¨</span><span class="z-tone z-tone-right">Ë‹</span></span></span>ï¼
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card h-full" onclick="this.classList.toggle('flipped')">
                        <div class="flip-card-inner">
                            <div class="flip-card-front"><div class="text-7xl mb-4">ğŸ¦Œ</div>
                                <h4 class="text-2xl font-bold text-gray-700">
                                    <span class="z-block"><span class="z-char">é€™</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„“</span><span class="z-bo-symbol">ã„œ</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                    <span class="z-block"><span class="z-char">æ˜¯</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                    <span class="z-block"><span class="z-char">ä»€</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„œ</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                                    <span class="z-block"><span class="z-char">éº¼</span><span class="z-bopomofo"><span class="z-tone z-tone-5">Ë™</span><span class="z-bo-symbol">ã„‡</span><span class="z-bo-symbol">ã„œ</span></span></span>ï¼Ÿ
                                </h4>
                            </div>
                            <div class="flip-card-back p-4">
                                <h4 class="text-2xl font-bold text-yellow-300 mb-1 flex flex-wrap justify-center">
                                    <span class="z-block"><span class="z-char">é¦´</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„’</span><span class="z-bo-symbol">ã„©</span><span class="z-bo-symbol">ã„£</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                                    <span class="z-block"><span class="z-char">é¹¿</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Œ</span><span class="z-bo-symbol">ã„¨</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                </h4>
                                <div class="text-lg font-bold text-white font-sans mb-2">Reindeer</div>
                                <p>
                                    <span class="z-block"><span class="z-char">å¹«</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„…</span><span class="z-bo-symbol">ã„¤</span></span></span>
                                    <span class="z-block"><span class="z-char">è–</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-bo-symbol">ã„¥</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                    <span class="z-block"><span class="z-char">èª•</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‰</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                                    <span class="z-block"><span class="z-char">è€</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Œ</span><span class="z-bo-symbol">ã„ </span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                                    <span class="z-block"><span class="z-char">äºº</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„–</span><span class="z-bo-symbol">ã„£</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                                    <span class="z-block"><span class="z-char">æ‹‰</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„Œ</span><span class="z-bo-symbol">ã„š</span></span></span>
                                    <span class="z-block"><span class="z-char">è»Š</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„”</span><span class="z-bo-symbol">ã„œ</span></span></span>ï¼
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- é­”æ³•æ•…äº‹ -->
        <div id="section-story" class="page-section">
            <button onclick="goHome()" class="mb-6 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-3 px-8 rounded-full flex items-center gap-2 text-xl shadow-md active:scale-95 transition">
                ğŸ  å›ä¸»é¸å–®
            </button>
            <section class="mb-16 bg-blue-600 rounded-[2rem] p-6 md:p-8 shadow-2xl border-4 border-white text-white">
                <div class="flex items-center gap-3 mb-6">
                    <span class="text-4xl">âœ¨</span>
                    <h3 class="text-3xl font-bold leading-relaxed">
                        <span class="z-block"><span class="z-char">é­”</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„‡</span><span class="z-bo-symbol">ã„›</span><span class="z-tone z-tone-right">ËŠ</span></span></span>
                        <span class="z-block"><span class="z-char">æ³•</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„ˆ</span><span class="z-bo-symbol">ã„š</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">æ•…</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„¨</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">äº‹</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                    </h3>
                </div>
                <div class="bg-white/10 p-8 rounded-3xl backdrop-blur-sm">
                    <p class="mb-8 text-2xl text-center">
                        <span class="z-block"><span class="z-char">é¸</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„’</span><span class="z-bo-symbol">ã„©</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">ä¸€</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„§</span></span></span>
                        <span class="z-block"><span class="z-char">å€‹</span><span class="z-bopomofo"><span class="z-tone z-tone-5">Ë™</span><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„œ</span></span></span>
                        <span class="z-block"><span class="z-char">ä¸»</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„“</span><span class="z-bo-symbol">ã„¨</span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">è§’</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„ </span><span class="z-tone z-tone-right">Ë‡</span></span></span>ï¼Œ
                        <span class="z-block"><span class="z-char">è®Š</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„…</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„¢</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">å‡º</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„”</span><span class="z-bo-symbol">ã„¨</span></span></span>
                        <span class="z-block"><span class="z-char">ä¸€</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„§</span></span></span>
                        <span class="z-block"><span class="z-char">å€‹</span><span class="z-bopomofo"><span class="z-tone z-tone-5">Ë™</span><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„œ</span></span></span>
                        <span class="z-block"><span class="z-char">å°</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„’</span><span class="z-bo-symbol">ã„§</span><span class="z-bo-symbol">ã„ </span><span class="z-tone z-tone-right">Ë‡</span></span></span>
                        <span class="z-block"><span class="z-char">æ•…</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„</span><span class="z-bo-symbol">ã„¨</span><span class="z-tone z-tone-right">Ë‹</span></span></span>
                        <span class="z-block"><span class="z-char">äº‹</span><span class="z-bopomofo"><span class="z-bo-symbol">ã„•</span><span class="z-tone z-tone-right">Ë‹</span></span></span>ï¼
                    </p>
                    <div class="grid grid-cols-3 gap-6 mb-8">
                        <button onclick="generateStory('é¦´é¹¿')" class="bg-white hover:bg-blue-50 text-gray-800 p-6 rounded-2xl shadow-lg transform hover:-translate-y-1 active:scale-95 transition flex flex-col items-center gap-2 group">
                            <span class="text-6xl">ğŸ¦Œ</span><span class="font-bold text-xl">é¦´é¹¿</span>
                        </button>
                        <button onclick="generateStory('é›ªäºº')" class="bg-white hover:bg-blue-50 text-gray-800 p-6 rounded-2xl shadow-lg transform hover:-translate-y-1 active:scale-95 transition flex flex-col items-center gap-2 group">
                            <span class="text-6xl">â›„</span><span class="font-bold text-xl">é›ªäºº</span>
                        </button>
                        <button onclick="generateStory('è–‘é¤…äºº')" class="bg-white hover:bg-blue-50 text-gray-800 p-6 rounded-2xl shadow-lg transform hover:-translate-y-1 active:scale-95 transition flex flex-col items-center gap-2 group">
                            <span class="text-6xl">ğŸª</span><span class="font-bold text-xl">è–‘é¤…äºº</span>
                        </button>
                    </div>
                    <div id="storyResponse" class="bg-white text-gray-800 p-8 rounded-3xl shadow-md hidden relative">
                        <div class="flex justify-between items-center mb-4">
                            <span class="font-bold text-blue-600 text-xl">ğŸ“– æ•…äº‹ï¼š</span>
                            <button id="playStoryBtn" onclick="playStoryAudio()" class="hidden flex items-center gap-2 bg-yellow-100 hover:bg-yellow-200 text-yellow-700 px-4 py-2 rounded-full text-lg font-bold transition">
                                <span>ğŸ”Š è½æ•…äº‹</span>
                            </button>
                            <div id="storyAudioLoading" class="hidden text-lg text-gray-500 flex items-center gap-2">
                                <div class="speaking-wave">
                                    <div class="bar"></div><div class="bar"></div><div class="bar"></div>
                                </div>
                                è®€å–ä¸­...
                            </div>
                        </div>
                        <div id="storyText" class="text-2xl leading-relaxed text-gray-800"></div>
                    </div>
                    <div id="storyLoading" class="text-center text-2xl font-bold hidden thinking-dots mt-4">æ­£åœ¨æ–½å±•é­”æ³•</div>
                </div>
            </section>
        </div>

    </main>

    <footer class="bg-red-700 text-white text-center py-6 mt-10 text-xl">
        <p class="font-bold">Merry Christmas!</p>
    </footer>

    <script>
        // --- è¨­å®š API Key ---
        // âš ï¸ é‡è¦æç¤ºï¼š
        // 1. åœ¨é€™è£¡é è¦½æ™‚ï¼Œè«‹ä¿ç•™ä¸‹æ–¹ç‚ºç©ºå­—ä¸² "" (ç³»çµ±æœƒè‡ªå‹•è™•ç†)ã€‚
        // 2. è‹¥è¦éƒ¨ç½²åˆ° GitHub Pagesï¼Œè«‹å°‡ "" æ›¿æ›æˆæ‚¨è‡ªå·±çš„ API Keyã€‚
        //    ç”³è«‹ç¶²å€ï¼šhttps://aistudio.google.com/app/apikey
        const apiKey = "AIzaSyB3whkh9hoXamjV9Plx19gV47p0UI0eOWU"; 
        
        // ç§»é™¤æª¢æŸ¥é‚è¼¯ï¼Œä»¥å…æ“‹ä½é è¦½ç’°å¢ƒçš„è‡ªå‹•æ³¨å…¥
        // if (apiKey === "è«‹åœ¨æ­¤å¡«å…¥æ‚¨çš„_API_KEY") { ... }

        let lastSantaResponse = ""; 
        let lastStoryResponse = ""; 
        let studentName = "";
        let playedGames = new Set(); 

        // --- ç™»å…¥èˆ‡å°èˆªç³»çµ± ---
        function login() {
            const input = document.getElementById('studentNameInput');
            if(input.value.trim() !== "") {
                studentName = input.value.trim();
                document.getElementById('navStudentName').innerText = `ğŸ‘‹ å—¨ï¼Œ${studentName}ï¼`;
                document.getElementById('navStudentName').classList.remove('hidden');
                switchPage('page-welcome', 'page-menu');
            } else {
                alert("è«‹è¼¸å…¥åå­—å–”ï¼");
            }
        }

        function switchPage(hideId, showId) {
            document.querySelectorAll('.page-section').forEach(el => el.classList.remove('active'));
            document.getElementById(showId).classList.add('active');
            stopAllGameTimers();
            window.scrollTo(0,0);
        }

        function goHome() {
            if(!studentName) return;
            switchPage('any', 'page-menu');
        }

        function goToSection(sectionId) {
            switchPage('page-menu', sectionId);
            playedGames.add(sectionId);
            const menuCard = document.getElementById('menu-' + sectionId);
            if(menuCard) {
                menuCard.classList.add('played');
            }
            if(sectionId === 'section-game4') {
                setTimeout(initPaint, 100); 
            }
            if(sectionId === 'section-game2') {
                initMemoryGame();
            }
        }
        
        function stopAllGameTimers() {
            if (typeof memoryTimerInterval !== 'undefined') clearInterval(memoryTimerInterval);
            if (typeof catchTimerInterval !== 'undefined') clearInterval(catchTimerInterval);
            if (typeof spawnTimeout !== 'undefined') clearTimeout(spawnTimeout);
            isGameRunning = false;
        }

        function playVideo(container, videoId, startSeconds = 0) {
            container.classList.remove('video-cover');
            let src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&playsinline=1&modestbranding=1`;
            if (startSeconds > 0) src += `&start=${startSeconds}`;
            container.innerHTML = `<iframe class="w-full h-full" src="${src}" title="Video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
            container.onclick = null; 
        }

        // --- Helper: Gemini API ---
        async function callGemini(prompt) {
            // ç§»é™¤ API Key æª¢æŸ¥ï¼Œè®“é è¦½ç’°å¢ƒä¹Ÿèƒ½é‹ä½œ
            // if (!apiKey ... ) ...
            
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`;
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });
                
                if (response.status === 403) {
                    return "é‘°åŒ™æ¬Šé™ä¸è¶³å–”ï¼(è«‹æª¢æŸ¥ API Key ç¶²åŸŸé™åˆ¶)";
                }
                if (!response.ok) throw new Error(`API Error: ${response.status}`);
                
                const data = await response.json();
                if (data.candidates && data.candidates.length > 0) {
                    return data.candidates[0].content.parts[0].text;
                } else {
                    return "è–èª•è€å…¬å…¬æ­£åœ¨æƒ³...";
                }
            } catch (e) { 
                console.error(e); 
                return "è–èª•è€å…¬å…¬æ­£åœ¨å¿™ç·šä¸­...(è«‹ç¢ºèªç¶²è·¯æˆ– API Key)"; 
            }
        }

        // æ–°å¢ï¼šç§»é™¤ Emoji çš„è¼”åŠ©å‡½å¼ (ä½¿ç”¨ Unicode å±¬æ€§éæ¿¾)
        function removeEmojis(text) {
            if (!text) return "";
            return text.replace(/\p{Extended_Pictographic}/gu, '')
                       .replace(/\p{Emoji_Presentation}/gu, '')
                       .replace(/\s+/g, ' ') 
                       .trim();
        }

        // --- Helper: TTS (å·²ä¿®æ­£ç‚º Browser Native) ---
        // ä½¿ç”¨ç€è¦½å™¨å…§å»ºèªéŸ³ï¼Œé¿å… API 403 éŒ¯èª¤ï¼Œä¸”å®Œå…¨å…è²»
        function playAudioGeneric(text, btnId, loadingId) {
            if (!text) return;
            const textForSpeech = removeEmojis(text); // ä¾ç„¶éæ¿¾ Emoji
            
            const btn = document.getElementById(btnId);
            const loading = document.getElementById(loadingId);
            
            // é¡¯ç¤ºè®€å–ä¸­
            btn.classList.add('hidden');
            loading.classList.remove('hidden');

            // ä½¿ç”¨ Web Speech API
            const utterance = new SpeechSynthesisUtterance(textForSpeech);
            utterance.lang = 'zh-TW'; // è¨­å®šä¸­æ–‡
            utterance.rate = 0.9;     // ç¨å¾®æ”¾æ…¢ä¸€é»çµ¦å°æœ‹å‹è½
            utterance.pitch = 1.0;
            
            // ç•¶å”¸å®Œæ™‚
            utterance.onend = () => {
                loading.classList.add('hidden');
                btn.classList.remove('hidden');
            };
            
            // ç•¶ç™¼ç”ŸéŒ¯èª¤æ™‚
            utterance.onerror = (e) => {
                console.error("TTS Error:", e);
                loading.classList.add('hidden');
                btn.classList.remove('hidden');
            };

            // åœæ­¢ä¹‹å‰çš„ç™¼éŸ³ä¸¦é–‹å§‹æ–°çš„
            window.speechSynthesis.cancel();
            window.speechSynthesis.speak(utterance);
        }

        async function playSantaAudio() {
            playAudioGeneric(lastSantaResponse, 'playAudioBtn', 'audioLoading');
        }

        async function playStoryAudio() {
            playAudioGeneric(lastStoryResponse, 'playStoryBtn', 'storyAudioLoading');
        }

        function startListening() {
            if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                alert("æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´èªéŸ³è¼¸å…¥ï¼Œè«‹ä½¿ç”¨ Chromeï¼");
                return;
            }
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            const recognition = new SpeechRecognition();
            recognition.lang = 'zh-TW';
            recognition.start();
            
            const input = document.getElementById('santaInput');
            input.placeholder = "æ­£åœ¨è½ä½ èªªè©±...";
            
            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                input.value = transcript;
                input.placeholder = "æƒ³è·Ÿè–èª•è€å…¬å…¬èªªä»€éº¼ï¼Ÿ";
                askSanta(); 
            };
            recognition.onerror = () => {
                input.placeholder = "è½ä¸æ¸…æ¥šï¼Œè«‹å†è©¦ä¸€æ¬¡";
            };
        }

        async function askSanta() {
            const input = document.getElementById('santaInput');
            const responseBox = document.getElementById('santaResponse');
            const loadingBox = document.getElementById('santaLoading');
            const textBox = document.getElementById('santaText');
            const audioBtn = document.getElementById('playAudioBtn');
            const audioLoading = document.getElementById('audioLoading');
            
            const userText = input.value.trim();
            if (!userText) return;

            loadingBox.classList.remove('hidden');
            responseBox.classList.add('hidden');
            audioBtn.classList.add('hidden'); 

            const systemPrompt = `ä½ ç¾åœ¨æ˜¯è–èª•è€å…¬å…¬ã€‚è«‹ç”¨ç¹é«”ä¸­æ–‡å›ç­”ä¸€ä½åå«${studentName}çš„åœ‹å°ä¸€å¹´ç´šå°æœ‹å‹çš„å•é¡Œï¼š"${userText}"ã€‚èªæ°£æº«æŸ”æ…ˆç¥¥ã€ç°¡çŸ­(50å­—å…§)ã€å¤šç”¨emojiã€‚`;
            const reply = await callGemini(systemPrompt);

            lastSantaResponse = reply; 
            
            if (window.marked) {
                textBox.innerHTML = marked.parse(reply);
            } else {
                textBox.innerText = reply;
            }
            
            loadingBox.classList.add('hidden');
            responseBox.classList.remove('hidden');
            audioBtn.classList.remove('hidden'); 
            audioLoading.classList.add('hidden');
            
            input.value = '';
        }
        
        async function generateStory(character) {
            const responseBox = document.getElementById('storyResponse');
            const loadingBox = document.getElementById('storyLoading');
            const textBox = document.getElementById('storyText');
            const audioBtn = document.getElementById('playStoryBtn');

            loadingBox.classList.remove('hidden');
            responseBox.classList.add('hidden');
            audioBtn.classList.add('hidden');

            const systemPrompt = `è«‹ç‚ºåœ‹å°ä¸€å¹´ç´šçš„åå«${studentName}çš„å°æœ‹å‹å¯«ä¸€å€‹é—œæ–¼ã€Œ${character}ã€çš„è¶…çŸ­æ•…äº‹ã€‚2-3å¥è©±ï¼Œç¹é«”ä¸­æ–‡ï¼Œæº«é¦¨å¯æ„›ï¼Œå«emojiã€‚`;
            const story = await callGemini(systemPrompt);

            lastStoryResponse = story; 

            if (window.marked) {
                textBox.innerHTML = marked.parse(story);
            } else {
                textBox.innerText = story;
            }
            
            loadingBox.classList.add('hidden');
            responseBox.classList.remove('hidden');
            audioBtn.classList.remove('hidden'); 
        }

        // --- Game 1: Decoration ---
        const sources = document.querySelectorAll('.draggable-source');
        const gameArea = document.getElementById('decorationGameArea');
        const treeArea = document.getElementById('treeTargetArea');
        let draggedElement = null;

        sources.forEach(source => {
            source.addEventListener('mousedown', startDrag);
            source.addEventListener('touchstart', startDrag, {passive: false});
        });

        function startDrag(e) {
            e.preventDefault();
            const source = e.currentTarget;
            const type = source.dataset.type;
            
            draggedElement = document.createElement('div');
            draggedElement.innerText = type;
            draggedElement.className = 'absolute text-6xl pointer-events-none z-50 drop-shadow-md'; 
            
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;
            
            draggedElement.style.left = clientX + 'px';
            draggedElement.style.top = clientY + 'px';
            draggedElement.style.transform = 'translate(-50%, -50%) scale(1.2)'; 
            
            document.body.appendChild(draggedElement);
            
            document.addEventListener('mousemove', moveDrag);
            document.addEventListener('mouseup', endDrag);
            document.addEventListener('touchmove', moveDrag, {passive: false});
            document.addEventListener('touchend', endDrag);
        }

        function moveDrag(e) {
            if (!draggedElement) return;
            e.preventDefault();
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;
            
            draggedElement.style.left = clientX + 'px';
            draggedElement.style.top = clientY + 'px';
        }

        function endDrag(e) {
            if (!draggedElement) return;
            
            const clientX = e.changedTouches ? e.changedTouches[0].clientX : e.clientX;
            const clientY = e.changedTouches ? e.changedTouches[0].clientY : e.clientY;
            
            const treeRect = treeArea.getBoundingClientRect();
            
            if (clientX >= treeRect.left && clientX <= treeRect.right &&
                clientY >= treeRect.top && clientY <= treeRect.bottom) {
                
                const decoration = document.createElement('div');
                decoration.innerText = draggedElement.innerText;
                decoration.className = 'tree-decoration text-5xl drop-shadow-sm'; 
                
                const relX = clientX - treeRect.left;
                const relY = clientY - treeRect.top;
                
                decoration.style.left = relX + 'px';
                decoration.style.top = relY + 'px';
                
                treeArea.appendChild(decoration);
            }
            
            draggedElement.remove();
            draggedElement = null;
            document.removeEventListener('mousemove', moveDrag);
            document.removeEventListener('mouseup', endDrag);
            document.removeEventListener('touchmove', moveDrag);
            document.removeEventListener('touchend', endDrag);
        }

        function clearDecorations() {
            const decorations = treeArea.querySelectorAll('.tree-decoration');
            decorations.forEach(d => d.remove());
        }

        async function exportTreePDF() {
            const { jsPDF } = window.jspdf;
            const element = document.getElementById('decorationGameArea');
            const palette = element.querySelector('.rounded-b-2xl') || element.querySelector('.rounded-b-3xl'); 
            if(palette) palette.style.display = 'none'; 
            
            try {
                const canvas = await html2canvas(element, { scale: 2, backgroundColor: '#166534' });
                if(palette) palette.style.display = 'flex';
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jsPDF('p', 'mm', 'a4');
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = (canvas.height * pdfWidth) / canvas.width;
                pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
                pdf.save(`è–èª•æ¨¹-${studentName || 'å°æœ‹å‹'}.pdf`);
            } catch (err) {
                console.error(err);
                alert("ç„¡æ³•ç”¢ç”Ÿ PDFï¼Œè«‹ç¨å¾Œå†è©¦ï¼");
                if(palette) palette.style.display = 'flex';
            }
        }

        // --- Game 2: Memory Match ---
        const memoryIcons = ['ğŸ…', 'ğŸ„', 'ğŸ', 'ğŸ¦Œ', 'â›„', 'ğŸª'];
        let memoryCards = [];
        let flippedCards = [];
        let matchedPairs = 0;
        let memoryTimerInterval;
        let memoryTimeLeft = 60;

        function initMemoryGame() {
            const grid = document.getElementById('memoryGrid');
            grid.innerHTML = '';
            matchedPairs = 0;
            flippedCards = [];
            
            if(memoryTimerInterval) clearInterval(memoryTimerInterval);
            memoryTimeLeft = 60;
            document.getElementById('memoryTimer').innerText = memoryTimeLeft;
            document.getElementById('memoryOverlay').classList.remove('hidden');

            let deck = [...memoryIcons, ...memoryIcons];
            deck.sort(() => 0.5 - Math.random());
            
            deck.forEach((icon, index) => {
                const card = document.createElement('div');
                card.className = 'memory-card';
                card.dataset.icon = icon;
                card.dataset.index = index;
                card.onclick = () => flipMemoryCard(card);
                card.innerHTML = `<div class="front">?</div>`; 
                grid.appendChild(card);
            });
        }

        function startMemoryGame() {
            document.getElementById('memoryOverlay').classList.add('hidden');
            if(memoryTimerInterval) clearInterval(memoryTimerInterval);
            memoryTimeLeft = 60;
            document.getElementById('memoryTimer').innerText = memoryTimeLeft;
            
            memoryTimerInterval = setInterval(() => {
                memoryTimeLeft--;
                document.getElementById('memoryTimer').innerText = memoryTimeLeft;
                if(memoryTimeLeft <= 0) {
                    clearInterval(memoryTimerInterval);
                    alert("æ™‚é–“åˆ°ï¼â° åŠ æ²¹ï¼Œå†è©¦ä¸€æ¬¡ï¼");
                    initMemoryGame();
                }
            }, 1000);
        }
        
        function flipMemoryCard(card) {
            if (!document.getElementById('memoryOverlay').classList.contains('hidden')) return;
            if (memoryTimeLeft <= 0) return; 
            if (card.classList.contains('flipped') || card.classList.contains('matched') || flippedCards.length >= 2) return;
            
            card.classList.add('flipped');
            card.textContent = card.dataset.icon; 
            flippedCards.push(card);
            
            if (flippedCards.length === 2) {
                setTimeout(checkMatch, 800);
            }
        }
        
        function checkMatch() {
            const [card1, card2] = flippedCards;
            if (card1.dataset.icon === card2.dataset.icon) {
                card1.classList.add('matched');
                card2.classList.add('matched');
                matchedPairs++;
                if (matchedPairs === memoryIcons.length) {
                    clearInterval(memoryTimerInterval);
                    setTimeout(() => alert(`æ­å–œä½ ï¼ç”¨äº† ${60 - memoryTimeLeft} ç§’å®Œæˆï¼ğŸ‰`), 300);
                }
            } else {
                card1.classList.remove('flipped');
                card1.innerHTML = '<div class="front">?</div>'; 
                card2.classList.remove('flipped');
                card2.innerHTML = '<div class="front">?</div>'; 
            }
            flippedCards = [];
        }

        // --- Game 3: Catch Gifts ---
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let gameInterval;
        let isGameRunning = false;
        let playerX = 250; 
        let score = 0;
        let fallingItems = [];
        let moveDirection = 0; 
        let catchTimerInterval;
        let catchTimeLeft = 60;
        let spawnTimeout; 

        function startGame() {
            if (isGameRunning) return;
            if(gameInterval) cancelAnimationFrame(gameInterval);
            if(catchTimerInterval) clearInterval(catchTimerInterval);
            if(spawnTimeout) clearTimeout(spawnTimeout); 

            isGameRunning = true;
            document.getElementById('gameOverlay').classList.add('hidden');
            score = 0;
            fallingItems = [];
            document.getElementById('score').innerText = score;
            catchTimeLeft = 60;
            document.getElementById('catchTimer').innerText = catchTimeLeft;
            
            catchTimerInterval = setInterval(() => {
                catchTimeLeft--;
                document.getElementById('catchTimer').innerText = catchTimeLeft;
                if(catchTimeLeft <= 0) {
                    clearInterval(catchTimerInterval);
                    isGameRunning = false;
                    if(spawnTimeout) clearTimeout(spawnTimeout); 
                    alert("æ™‚é–“åˆ°ï¼â° éŠæˆ²çµæŸï¼Œä½ çš„å¾—åˆ†æ˜¯ï¼š" + score);
                    document.getElementById('gameOverlay').classList.remove('hidden');
                }
            }, 1000);

            gameInterval = requestAnimationFrame(gameLoop);
            spawnItem();
        }

        function restartCatchGame() {
            isGameRunning = false;
            if(gameInterval) cancelAnimationFrame(gameInterval);
            if(catchTimerInterval) clearInterval(catchTimerInterval);
            if(spawnTimeout) clearTimeout(spawnTimeout); 
            startGame();
        }

        function spawnItem() {
            if (!isGameRunning) return;
            fallingItems.push({
                x: Math.random() * (canvas.width - 40), 
                y: -30,
                speed: 2 + Math.random() * 2,
                type: Math.random() > 0.8 ? 'ğŸ’£' : 'ğŸ' 
            });
            spawnTimeout = setTimeout(spawnItem, 1000);
        }

        function gameLoop() {
            if (!isGameRunning) return;
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            if (moveDirection !== 0) {
                playerX += moveDirection * 8; 
                if (playerX < 0) playerX = 0;
                if (playerX > canvas.width - 50) playerX = canvas.width - 50;
            }

            ctx.font = "50px Arial";
            ctx.fillText("ğŸ…", playerX, canvas.height - 20);

            for (let i = 0; i < fallingItems.length; i++) {
                let item = fallingItems[i];
                item.y += item.speed;
                ctx.fillText(item.type, item.x, item.y);

                if (item.y > canvas.height - 60 && item.y < canvas.height - 10 && item.x > playerX - 30 && item.x < playerX + 50) {
                    if (item.type === 'ğŸ') {
                        score += 10;
                    } else {
                        score -= 5;
                    }
                    document.getElementById('score').innerText = score;
                    fallingItems.splice(i, 1);
                    i--;
                } else if (item.y > canvas.height + 10) {
                    fallingItems.splice(i, 1);
                    i--;
                }
            }
            gameInterval = requestAnimationFrame(gameLoop);
        }

        function moveLeft() { moveDirection = -1; }
        function moveRight() { moveDirection = 1; }
        function stopMove() { moveDirection = 0; }

        // --- Game 4: Paint Santa ---
        const pCanvas = document.getElementById('paintCanvas');
        const pCtx = pCanvas.getContext('2d');
        let isPainting = false;
        let currentColor = '#EF4444';
        let brushSize = 5;
        // ç§»é™¤åŸæœ¬çš„åœ–ç‰‡ç‰©ä»¶ let santaImgObj = new Image();

        function initPaint() {
            pCtx.lineCap = 'round';
            pCtx.lineJoin = 'round';
            
            // ç›´æ¥é–‹å§‹ç¹ªè£½åŸºæœ¬å½¢ç‹€ï¼Œä¸éœ€è¦ç­‰å¾…åœ–ç‰‡è¼‰å…¥
            clearPaint();
        }

        function clearPaint() {
            // 1. æ¸…é™¤ç•«å¸ƒå¡«ç™½
            pCtx.fillStyle = '#FFFFFF';
            pCtx.fillRect(0, 0, pCanvas.width, pCanvas.height);
            
            // 2. ç¹ªè£½è–èª•è€äººè¼ªå»“ (ç”±åŸºæœ¬å¹¾ä½•åœ–å½¢çµ„æˆ)
            pCtx.save(); // å„²å­˜ç•¶å‰ç‹€æ…‹
            pCtx.strokeStyle = '#000000'; // é»‘è‰²è¼ªå»“
            pCtx.lineWidth = 3; // ç·šæ¢ç²—ç´°
            pCtx.fillStyle = '#FFFFFF'; // å…§éƒ¨é è¨­ç™½è‰² (è®“å°æœ‹å‹å¡—è‰²)

            // --- èº«é«” (Body) - å¤§åœ“è§’çŸ©å½¢ ---
            pCtx.beginPath();
            // ä½¿ç”¨ç°¡å–®çš„ç·šæ¢ç•«èº«é«”
            pCtx.moveTo(140, 200); 
            pCtx.lineTo(260, 200); // è‚©è†€
            pCtx.lineTo(270, 350); // å³ä¸‹
            pCtx.lineTo(130, 350); // å·¦ä¸‹
            pCtx.closePath();
            pCtx.fill();
            pCtx.stroke();

            // --- çš®å¸¶ (Belt) - çŸ©å½¢ ---
            pCtx.beginPath();
            pCtx.rect(135, 270, 130, 30);
            pCtx.fill();
            pCtx.stroke();
            
            // çš®å¸¶æ‰£ (Buckle) - å°çŸ©å½¢
            pCtx.beginPath();
            pCtx.rect(185, 270, 30, 30);
            pCtx.stroke();
            pCtx.beginPath();
            pCtx.rect(190, 275, 20, 20); // å…§æ‰£
            pCtx.stroke();

            // --- é´å­ (Boots) - åœ“è§’çŸ©å½¢ ---
            // å·¦è…³
            pCtx.beginPath();
            pCtx.rect(140, 350, 50, 30); 
            pCtx.fill();
            pCtx.stroke();
            // å³è…³
            pCtx.beginPath();
            pCtx.rect(210, 350, 50, 30);
            pCtx.fill();
            pCtx.stroke();

            // --- é ­éƒ¨ (Head) - åœ“å½¢ ---
            pCtx.beginPath();
            pCtx.arc(200, 160, 45, 0, Math.PI * 2);
            pCtx.fill();
            pCtx.stroke();

            // --- é¬å­ (Beard) - å€’ä¸‰è§’å½¢/æ›²ç·š ---
            pCtx.beginPath();
            pCtx.moveTo(165, 180);
            pCtx.quadraticCurveTo(200, 240, 235, 180); // é¬å­å¼§ç·š
            pCtx.fill();
            pCtx.stroke();

            // --- å¸½å­ (Hat) - ä¸‰è§’å½¢ ---
            pCtx.beginPath();
            pCtx.moveTo(150, 130); // å·¦å¸½æ²¿
            pCtx.lineTo(250, 130); // å³å¸½æ²¿
            pCtx.lineTo(200, 50);  // å¸½é ‚
            pCtx.closePath();
            pCtx.fill();
            pCtx.stroke();
            
            // å¸½ç·£ (Hat brim) - æ©¢åœ“
            pCtx.beginPath();
            pCtx.ellipse(200, 130, 60, 15, 0, 0, Math.PI * 2);
            pCtx.fill();
            pCtx.stroke();
            
            // æ¯›çƒ (Pom-pom) - åœ“å½¢
            pCtx.beginPath();
            pCtx.arc(200, 50, 15, 0, Math.PI * 2);
            pCtx.fill();
            pCtx.stroke();

            // --- æ‰‹è‡‚ (Arms) - æ©¢åœ“ ---
            // å·¦æ‰‹
            pCtx.beginPath();
            pCtx.ellipse(120, 220, 20, 50, Math.PI / 4, 0, Math.PI * 2);
            pCtx.fill();
            pCtx.stroke();
            // å³æ‰‹
            pCtx.beginPath();
            pCtx.ellipse(280, 220, 20, 50, -Math.PI / 4, 0, Math.PI * 2);
            pCtx.fill();
            pCtx.stroke();

            // æ‰‹å¥— (Gloves) - åœ“å½¢
            pCtx.beginPath();
            pCtx.arc(105, 205, 18, 0, Math.PI * 2); // å·¦æ‰‹å¥—
            pCtx.fill();
            pCtx.stroke();
            pCtx.beginPath();
            pCtx.arc(295, 205, 18, 0, Math.PI * 2); // å³æ‰‹å¥—
            pCtx.fill();
            pCtx.stroke();

            // --- äº”å®˜ (Face details) ---
            pCtx.fillStyle = '#000000'; // é»‘è‰²çœ¼ç›
            pCtx.beginPath();
            pCtx.arc(185, 155, 4, 0, Math.PI * 2); // å·¦çœ¼
            pCtx.fill();
            pCtx.beginPath();
            pCtx.arc(215, 155, 4, 0, Math.PI * 2); // å³çœ¼
            pCtx.fill();
            
            pCtx.fillStyle = '#FFCCCB'; // ç²‰ç´…é¼»å­
            pCtx.beginPath();
            pCtx.arc(200, 165, 7, 0, Math.PI * 2); // é¼»å­
            pCtx.fill();
            pCtx.stroke(); // é¼»å­æ¡†ç·š

            pCtx.restore(); // æ¢å¾©ç‹€æ…‹ï¼Œä¸å½±éŸ¿å¾ŒçºŒç•«ç­†é¡è‰²
        }

        pCanvas.addEventListener('mousedown', startPaint);
        pCanvas.addEventListener('mousemove', drawPaint);
        pCanvas.addEventListener('mouseup', stopPaint);
        pCanvas.addEventListener('mouseout', stopPaint);
        
        pCanvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            startPaint(e.touches[0]);
        }, {passive: false});
        pCanvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            drawPaint(e.touches[0]);
        }, {passive: false});
        pCanvas.addEventListener('touchend', stopPaint);

        function startPaint(e) {
            isPainting = true;
            const rect = pCanvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            pCtx.beginPath();
            pCtx.moveTo(x, y);
            pCtx.strokeStyle = currentColor;
            pCtx.lineWidth = brushSize;
        }

        function drawPaint(e) {
            if (!isPainting) return;
            const rect = pCanvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            pCtx.lineTo(x, y);
            pCtx.stroke();
        }

        function stopPaint() {
            isPainting = false;
            pCtx.closePath();
        }

        function setColor(el, color) {
            currentColor = color;
            document.querySelectorAll('.color-btn').forEach(btn => btn.classList.remove('active'));
            el.classList.add('active');
        }

        function setBrushSize(size) {
            brushSize = size;
        }

        function exportPaintPDF() {
            const { jsPDF } = window.jspdf;
            const canvas = document.getElementById('paintCanvas');
            try {
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jsPDF('p', 'mm', 'a4');
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const margin = 20; 
                const imgWidth = pdfWidth - margin; 
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                const x = margin / 2;
                const y = 20; 
                pdf.addImage(imgData, 'PNG', x, y, imgWidth, imgHeight);
                pdf.save(`å½©ç¹ªè–èª•è€äºº-${studentName || 'å°æœ‹å‹'}.pdf`);
            } catch (err) {
                console.error(err);
                alert("ç„¡æ³•ç”¢ç”Ÿ PDFï¼Œè«‹ç¨å¾Œå†è©¦ï¼");
            }
        }

        function createSnowflake() {
            const snowflake = document.createElement('div');
            snowflake.innerHTML = 'â„';
            snowflake.classList.add('snowflake');
            snowflake.style.left = Math.random() * window.innerWidth + 'px';
            snowflake.style.animationDuration = Math.random() * 3 + 2 + 's';
            snowflake.style.opacity = Math.random();
            snowflake.style.fontSize = Math.random() * 10 + 10 + 'px';
            document.body.appendChild(snowflake);
            setTimeout(() => { snowflake.remove(); }, 5000);
        }
        setInterval(createSnowflake, 200);

    </script>
</body>
</html>
